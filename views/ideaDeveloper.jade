extends voting

block ideaDeveloper
   div.panel.panel-default
      div.panel-heading
         p Developer Resources
      div.panel-body
          if (estimatedmo != 0)
            - var percent = Math.round(commitedmo * 100 / estimatedmo)
            - var commited = (commitedmo / (40 * 4))
          else
            - var percent = 0
            - var commited = 0
          label Total estimated man months
          p Number of months it will take one dev working 40 hrs/week for 20 days/month to complete project.
          p.text-right= (estimatedmo / (40 * 4)) 
            |   mo.
          div.progress
             div.progress-bar(data-toggle='tooltip' data-placement='top' title='#{commited} mo. (#{percent}%) Commited' role='progressbar' aria-valuenow='#{commitedmo}' aria-valuemin='0' aria-valuemax='#{estimatedmo}' style='width: #{percent}%')
                span.sr-only #{percent} %
          if (userInfo.isDeveloper)
            if (devVote != undefined)
              p 
                span.bold Your estimate and commitment
              ul.list-group
                li.list-group-item Estimated man months
                  span.badge.pull-right= devVote.devmo
                li.list-group-item Available hrs/week
                  span.badge.pull-right= devVote.devweekly
                li.list-group-item Available weeks 
                  span.badge.pull-right= devVote.devweeks
              - var devHeader = 'Change your estimate'
              button.btn.btn-primary(type='button' data-toggle='modal' data-target='#devmodal')= devHeader
            else
              - devVote = {}
              - var devHeader = 'Give estimate'
              button.btn.btn-primary(type='button' data-toggle='modal' data-target='#devmodal')= devHeader
            div.modal.fade.bs-example-modal-sm#devmodal(tabindex='-1' role='dialog' aria-labelledby='devmodallabel' aria-hidden='true')
              div.modal-dialog.modal-sm
                div.modal-content
                  div.modal-header
                    button.close(type='button' data-dismiss='modal' aria-label='close')
                      span(aria-hidden='true') &times;
                    h4.modal-title#devmodallabel= devHeader
                  div.modal-body 
                    form(action='/idea/' + idea.id + '/devvote' method='post')
                       div.form-group
                         label(for='manmo') Estimated man months
                         div.input-group
                           input.form-control(type='number' min='1' step='1' name='manmo' value='#{devVote.devmo}' required)
                           span.input-group-addon mo.
                       div.checkbox
                          label
                             if (devVote.devweekly == 0)
                                input#checkbox-toggle(type='checkbox' name='interested') 
                             else
                                input#checkbox-toggle(type='checkbox' name='interested' checked)
                             | I want to work on this project.
                        div.form-group
                         label(for='weekly') Available hrs/week
                         div.input-group
                           input.form-control.optional(type='number' min='0' step='1' name='weekly' value='#{devVote.devweekly}' required)
                           span.input-group-addon hrs/week
                       div.form-group
                         label(for='weeks') Available weeks
                         div.input-group
                           input.form-control.optional(type='number' min='0' step='1' name='weeks' value='#{devVote.devweeks}' required)
                           span.input-group-addon weeks
                       div.form-group
                         button.btn.btn-primary(type='submit') Submit